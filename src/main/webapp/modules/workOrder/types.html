<div class="pane">
    <div class="panel panel-default" ng-controller="WorkOrderTypesViewCtrl">
        <!-- tip pop -->
        <toaster-container></toaster-container>
        <div class="content-list">
            <div class="row">
                <button class="operate-btn on" ng-click="createItem()">
                    <i class="fa fa-plus"></i>新建</button>
                <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="updateItem()" ng-disabled="!selectedItem">
                    <i class="fa fa-edit"></i>编辑</button>
                <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="deleteItem()" ng-disabled="!selectedItem">
                    <i class="fa fa-remove"></i>删除</button>
                <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="bindWithProcess()" ng-disabled="!selectedItem">
                    <i class="fa fa-chain"></i>绑定流程</button>
                <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="unbindWithProcess()" ng-disabled="!selectedItem">
                    <i class="fa fa-chain-broken"></i>解绑流程</button>
            </div>
            <div ui-grid="myGridOptions"
                 ui-grid-pagination ui-grid-selection ui-grid-resize-columns ui-grid-auto-resize>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="createOrUpdateTemplate">
    <div class="wocloud-dialog-header">
        <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <span ng-show="createOrUpdate=='C'">新建工单类型</span>
        <span ng-show="createOrUpdate=='U'">编辑工单类型</span>
    </div>
    <div class="wocloud-dialog-body">
        <form class="form-horizontal form-validation" name="typeForm" novalidate>
            <div class="form-group">
                <label class="col-sm-2 control-label">编码</label>
                <div class="col-sm-7">
                    <input type="number" name="typeCode" class="form-control" ng-model="workOrderType.typeCode" required ng-maxlength="256" ng-focus>
                </div>
                <span class="tip">*</span>
                <span class="tip" ng-show='typeForm.typeCode.$error.required'>必填项,数字类型</span>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">名称</label>
                <div class="col-sm-7">
                    <input type="text" name="typeName" class="form-control" ng-model="workOrderType.typeName" required ng-maxlength="256" ng-focus>
                </div>
                <span class="tip">*</span>
                <span class="tip" ng-show='typeForm.typeName.$error.required'>必填项</span>
            </div>
        </form>
    </div>
    <div class="wocloud-dialog-footer">
        <button type="button" class="btn btn-primary" ng-disabled="typeForm.$invalid" ng-click="saveItem()">确定</button>
        <button type="button" class="btn" ng-click="cancel()">取消</button>
    </div>
</script>

<script type="text/ng-template" id="deleteTemplate">
    <div class="wocloud-dialog-header">
        <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <span class="wocloud-dialog-title">删除工单类型</span>
    </div>
    <div class="wocloud-dialog-body">
        <p>你确定要删除 {{currentItem.typeName}} 吗?</p>
    </div>
    <div class="wocloud-dialog-footer">
        <button type="button" class="btn btn-primary" ng-click="removeItem()">确定</button>
        <button type="button" class="btn" ng-click="cancel()">取消</button>
    </div>
</script>

<script type="text/ng-template" id="bindWithProcessTemplate">
    <div class="wocloud-dialog-header">
        <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <span class="wocloud-dialog-title">绑定流程</span>
    </div>
    <div class="wocloud-dialog-body">
        <div ui-grid="flowGridOptions" ui-grid-pagination
             ui-grid-selection ui-grid-exporter ui-grid-resize-columns ui-grid-auto-resize>
        </div>
    </div>
    <div class="wocloud-dialog-footer">
        <button type="button" class="btn btn-primary" ng-disabled="!selectedItem" ng-click="bindWorkorderTypeAndProcess()">确定</button>
        <button type="button" class="btn" ng-click="cancel()">取消</button>
    </div>
</script>

<script type="text/ng-template" id="unbindWithProcessTemplate">
    <div class="wocloud-dialog-header">
        <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <span class="wocloud-dialog-title">解绑流程</span>
    </div>
    <div class="wocloud-dialog-body">
        <p>您确定要解绑该工单的关联流程 {{processDeploymentId}} 吗?</p>
    </div>
    <div class="wocloud-dialog-footer">
        <button type="button" class="btn btn-primary" ng-disabled="relationId<0" ng-click="unbindWorkorderTypeAndProcess()">确定</button>
        <button type="button" class="btn" ng-click="cancel()">取消</button>
    </div>
</script>