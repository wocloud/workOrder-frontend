<script>
    $("#wrapHeight").css("height",$(window).height());
    window.onresize=function(){
        $("#wrapHeight").css("height",$(window).height());
    }
</script>
<div class="content-container" id="wrapHeight">
    <tabset class="tab-container">
        <tab ng-repeat="tab in configTabs track by tab.index" heading="{{tab.title}}" active="tab.active" ng-click="tabChange(tab)">
            <div class="pane">
                <div class="panel panel-default">
                    <!-- tip pop -->
                    <div class="content-list">
                        <div class="row">
                            <button class="operate-btn on" ng-click="createItem()">
                                <i class="fa fa-plus"></i>新建</button>
                            <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="updateItem()" ng-disabled="!selectedItem">
                                <i class="fa fa-edit"></i>编辑</button>
                            <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="deleteItem()" ng-disabled="!selectedItem">
                                <i class="fa fa-remove"></i>删除</button>
                            <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="bindWithProcess()" ng-disabled="!selectedItem">
                                <i class="fa fa-chain"></i>绑定流程</button>
                            <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="unbindWithProcess()" ng-disabled="!selectedItem">
                                <i class="fa fa-chain-broken"></i>解绑流程</button>
                            <button class="operate-btn on btn-disabled-{{!selectedItem}}" ng-click="bindWithRole()" ng-disabled="!selectedItem">
                                <i class="fa fa-user"></i>绑定角色</button>
                        </div>
                        <div ui-grid="myGridOptions" style="width: 100%; height:400px; text-align: center;margin-top: 1px;"
                             ui-grid-pagination ui-grid-selection ui-grid-resize-columns ui-grid-auto-resize>
                        </div>
                    </div>
                </div>
            </div>

            <script type="text/ng-template" id="createOrUpdateTemplate">
                <div class="modal-header">
                    <h4 class="modal-title" ng-show="createOrUpdate=='C'">新建工单类型</h4>
                    <h4 class="modal-title" ng-show="createOrUpdate=='U'">编辑工单类型</h4>
                </div>
                <div class="modal-body">
                    <form class="file-brief file-brief-show form-validation" name="typeForm" novalidate id="form-new-style">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">编码</label>
                            <div class="col-sm-7">
                                <input type="number" name="typeCode" class="form-control" ng-model="workOrderType.typeCode" required ng-maxlength="256" ng-focus>
                            </div>
                            <span class="no-null">*</span>
                            <span class="error-message" ng-show='typeForm.typeCode.$error.required'>必填项,数字类型</span>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">名称</label>
                            <div class="col-sm-7">
                                <input type="text" name="typeName" class="form-control" ng-model="workOrderType.typeName" required ng-maxlength="256" ng-focus>
                            </div>
                            <span class="no-null">*</span>
                            <span class="error-message" ng-show='typeForm.typeName.$error.required'>必填项</span>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-disabled="typeForm.$invalid" ng-click="saveItem()">确定</button>
                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>
                </div>
            </script>

            <script type="text/ng-template" id="deleteTemplate">
                <div class="modal-header">
                    <h4 class="modal-title">删除工单类型</h4>
                </div>
                <div class="modal-body">
                    <p>你确定要删除 {{currentItem.typeName}} 吗?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="removeItem()">确定</button>
                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>
                </div>
            </script>

            <script type="text/ng-template" id="bindWithProcessTemplate">
                <div class="modal-header">
                    <h4 class="modal-title">绑定流程</h4>
                </div>
                <div class="modal-body">
                    <div ui-grid="flowGridOptions" ui-grid-pagination
                         ui-grid-selection ui-grid-exporter ui-grid-resize-columns ui-grid-auto-resize>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-disabled="!selectedItem" ng-click="bindWorkorderTypeAndProcess()">确定</button>
                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>
                </div>
            </script>

            <script type="text/ng-template" id="unbindWithProcessTemplate">
                <div class="modal-header">
                    <h4 class="modal-title">解绑流程</h4>
                </div>
                <div class="modal-body">
                    <p>您确定要解绑该工单的关联流程 {{processDeploymentId}} 吗?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-disabled="relationId<0" ng-click="unbindWorkorderTypeAndProcess()">确定</button>
                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>
                </div>
            </script>

            <script type="text/ng-template" id="bindWithGroupTemplate">
                <div class="modal-header">
                    <h4 class="modal-title">绑定角色</h4>
                </div>
                <div class="modal-body">
                    <span>请选择要绑定的角色:</span>&nbsp;&nbsp;<input type="checkbox" ng-model="selectAll" ng-click="all(selectAll)"/>全选/全不选
                    <div class="container-fluid">
                        <div class="col-sm-12 col-md-6" id="groupContainer" ng-repeat="group in Groups">
                            <input type="checkbox" value="{{group.id}}" ng-checked="{{group.checked}}" ng-model="selectedGroup">&nbsp;&nbsp;{{group.name}}
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="bindWorkorderTypeAndGroup()">确定</button>
                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>
                </div>
            </script>
        </tab>
    </tabset>
</div>